<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="utf-8" />
    <title>F3 Monitor Page Tutorial</title>
    <meta name="author" content="Salvatore Zaza"></meta>
    <meta name="description" content="F3 Monitor Page Tutorial"></meta>
    <meta name="viewport" content="width=device-width, maximum-scale=1.0, initial-scale=1.0, user-scalable=yes" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    
    
    <link rel="stylesheet" href="css/custom.css" media="screen,projection"></link>


    <script type="text/javascript" src="js/jquery.min.js"></script>    
    <script type="text/javascript" src="js/jmpress.js"></script>    
    <script type="text/javascript">
        $(function() {
            $('#jmpress').jmpress();
        });
    </script>

</head>

<body >
    <div id="jmpress">




    
        <div class="step" step="0" data-x="0" data-y="0">
            <h1 id="the-f3-monitor-page">The F3 Monitor Page</h1><img src="images/f3mon-main.png" alt="" width="800px" height="600px"></img>
        </div>

        <div class="step" step="1" data-x="0" data-y="0" data-z="0">
            <div class="popup" id="popup1">
                <p>This guide will introduce you to the comprehension of the <strong>F3 monitor page</strong>.</p>
            </div>
        </div>

        <div class="step" step="2" data-x="0" data-y="0" data-z="r0">
            <div class="popup" id="popup2">
                <p>But first a step <em>behind</em>.</p>
            </div>
        </div>

        <div class="step" step="3" data-x="0" data-y="0" data-z="-2000">
            <h1 id="cms-daq-upgrade-daq2">CMS DAQ Upgrade (DAQ2)</h1><img src="images/cms-daq-upgrade.png" alt="" width="800px" height="600px"></img>
        </div>

        <div class="step" step="4" data-x="0" data-y="0" data-z="-2000">
            <div class="popup" id="popup3">
                <p>This is the <strong>CMS DAQ Upgrade</strong>. You should already know it.</p>
            </div>
        </div>

        <div class="step" step="5" data-x="0" data-y="0" data-z="-2000">
            <div class="popup" id="popup4">
                <p>So We can now focus on the part where the <strong>F3 Monitor data</strong> are generated.</p>
            </div>
        </div>

        <div class="step" step="6" data-x="-150" data-y="200" data-z="-2000" data-scale="0.4">
            <div class="popup" id="popup5">
                <p>The HLT sub-farms.</p>
            </div>
        </div>

        <div class="step" step="7" data-x="-150" data-y="700" data-z="-2000" data-scale="0.4">
            <h1 id="the-hlt-sub-farms">The HLT sub-farms</h1><img src="images/hlt-subfarm2.png" alt="" width="" height=""></img>
        </div>
        <div class="step" step="8" data-x="-150" data-y="700" data-z="-2000" data-scale="0.4">
            <div class="popup" id="popup6">
                <p>When data flows throught the <strong>BU-FU appliance</strong>,the processes involved generate <strong>json</strong> file with information about the merging.</p>
            </div>
        </div>
        <div class="step" step="9" data-x="-150" data-y="700" data-scale="0.4" data-z="-2000">
            <div class="popup" id="popup7">
                <p>Each PC involved contains an <strong>ElasticSearch</strong> server who collect this json files.</p>
            </div>
        </div>
        <div class="step" step="10" data-x="-150" data-y="700" data-scale="0.4" data-z="-2000">
            <div class="popup" id="popup8">
                <div class="line-block">We have a set of server for each <strong>BU-FU appliance</strong> wich forms an <strong>ES Cluster</strong>.
                    <br></br>So We have an ES cluster for each appliance.
                    <br></br>
                </div>
            </div>
        </div>




        
        <div class="step" step="11" data-x="850" data-y="700" data-z="-2000" data-scale="0.4">
            <h1 id="the-es-tribe">The ES Tribe</h1><img src="images/hlt-subfarm2.png" alt="" width="" height=""></img>
        </div>
        <div class="step" step="12" data-x="850" data-y="700" data-z="-2000" data-scale="0.4">
            <div class="popup" id="popup9">
                <p>To connect all this ES cluster togheter there are some special ES server called <strong>tribe node</strong>.</p>
            </div>
        </div>
        <div class="step" step="13" data-x="850" data-y="700" data-scale="0.4" data-z="-2000">
            <div class="popup" id="popup10">
                <div class="line-block">Basically setting up a <strong>ES Tribe</strong>.
                    <br></br>In this way, each <strong>query</strong> performed on a tribe node will be propagated over all the BU-FU clusters.
                    <br></br>
                </div>
            </div>
        </div>
        <div class="step" step="14" data-x="850" data-y="700" data-scale="0.4" data-z="-2000">
            <div class="popup" id="popup11">
                <div class="line-block">But we dont want to stress the BU-FU servers with query coming from the Web Interface requests.
                    <br></br>Also, we want to collect the clusters data providing global informations.
                    <br></br>
                </div>
            </div>
        </div>
        <div class="step" step="15" data-x="850" data-y="700" data-z="-1500" data-scale="0.4">
            <h1 id="the-es-cdaq-cluster">The ES-CDAQ cluster</h1><img src="images/hlt-subfarm2.png" alt="" width="" height=""></img>
            <div class="popup" id="popup12">
                <div class="line-block">So, on top of this we create another ES cluster, called <strong>es-cdaq</strong>.
                    <br></br>
                </div>
            </div>
        </div>
        <div class="step" step="16" id="arrow-slide" data-scale="1" data-rotate-y="-45" data-x="700" data-z="-1750" data-y="700">
            <div class="popup" id="popup13">
                <div class="line-block">To collect data from the <strong>es-tribe</strong> and put them in the <strong>es-cdaq</strong> there is an ES resident software called <strong>RunRiver Plugin</strong>.
                    <br></br>
                </div>
            </div><img src="images/arrow.gif" alt="" width="216px" height="66px"></img>
        </div>
        <div class="step" step="17" data-x="700" data-z="-1750" data-y="700" data-scale="1" data-rotate-y="-45">
            <div class="popup" id="popup14">
                <p>The RunRiver plugin is composed in two part:</p>
                <ul>
                    <li>A RunRanger (role:main) who check when a new run starts</li>
                    <li>A Collector (role:collector) for each run ongoing who collect the data (triggered by the RunRanger)</li>
                </ul>
            </div>
        </div>
        <div class="step" step="18" data-x="0" data-y="0" data-z="0" data-rotate-y="0" data-scale="1">
            <div class="popup" id="popup15">
                <p>Now we can focus on the F3 web page.</p>
            </div>
        </div>
        <div class="step" step="19" data-x="0" data-y="-1000" data-scale="1">
            <div class="popup" id="popup16">
                <p>Let's see all its components , one by one.</p>
            </div>
        </div>
        <div class="step" step="20" id="navbar" data-x="0" data-y="-1500" data-scale="1"><img src="images/f3mon-navbar.png" alt="" width="" height=""></img>
        </div>
        <div class="step" step="21" data-x="0" data-y="0" data-rotate-y="0" data-z="2000" data-scale="1">
            <h1 id="that-s-all-for-now">That's all for now</h1>
            <p><em>Have fun!</em>
            </p>
        </div>

</body>

</html>
